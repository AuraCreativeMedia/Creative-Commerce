"use strict";(self.webpackChunkwoocommerce_filters=self.webpackChunkwoocommerce_filters||[]).push([[630],{5164:function(e,t,l){l.r(t);var r=l(7462),a=l(9307),s=l(9196),o=l(3026),n=l(385),c=l(2629),i=l(2819),m=l(5736),u=l(5236),f=l(9768),d=l(7536),h=l(374),p=l(9950),y=l(389),E=l(4271),g=l(7826),w=l.n(g);const b=(0,a.lazy)((()=>l.e(683).then(l.bind(l,521)))),k=WCF_Frontend;t.default=e=>{let{name:t,value:l,setValue:g,options:v,group:A,...S}=e;const{watch:N}=(0,d.Gc)(),_="yes"===k.filter_num_products,{getGroup:C,getStoredValue:Z,getInitialCounts:z,counts:M,prefilledValues:B,setPrefilling:F}=(0,y.CR)(),V=!0===S?.mobile?12:20,[L,P]=(0,s.useState)(V),T=Z(A,t),W=N(t,T),[Y,x]=(0,s.useState)(Array.isArray(T)?T:[]),[G,H]=(0,s.useState)(!0),[I,O]=(0,s.useState)([]),R=C(A),q=!!(0,i.has)(R,"data."+S.facet.slug)&&(0,s.useMemo)((()=>R.data[S.facet.slug]),[R.data[S.facet.slug]]);if(!q)return(0,a.createElement)(a.Fragment,null,"No terms found for the specified taxonomy.");(0,u.H)((()=>{const e=z(t);(0,i.has)(M,t)?O(M[t]):O(e)})),(0,s.useEffect)((()=>{let e=W;Array.isArray(e)||(e=[]),(0,i.isEqual)(e,Y)||x(Array.isArray(e)?w()(e):[])}),[W]),(0,s.useEffect)((()=>{(0,i.has)(B,t)&&(F(!0),g(t,B[t].map(Number)),F(!1))}),[B]),(0,s.useEffect)((()=>{"horizontal"!==S.layout&&(0,y.BB)(O,t,{method:H,itemsAmount:V,mobile:S?.mobile})}),[]),(0,s.useEffect)((()=>(E.YB.on("filterToggled-"+t,(e=>{F(!0),g(t,e.value),F(!1)})),()=>{E.YB.remove("filterToggled-"+t)})),[]),(0,h.Z)("wcf-reset-filters",(()=>{F(!0),g(t,[]),x([]),F(!1)}));const j=(0,E.V9)(q,I),D=!0===G||!0===S?.mobile?j.slice(0,L):j,J=Array.isArray(j)?parseInt(j.length):0,K=e=>{let{id:l,label:s,slug:m,children:u,count:f}=e;return(0,a.createElement)("div",null,(0,a.createElement)(o.Z,{checked:Y.includes(l),labelPlacement:n.Oi.right,overrides:p.W9,onChange:e=>((e,l)=>{let r=Y.filter((function(){return!0}));if(!0===e)r.push(l);else if(!1===e){var a=Y.indexOf(l);r.splice(a,1)}x(r),(0,i.isEmpty)(r)?g(t,!1):(0,i.isEmpty)(r)||g(t,w()(r))})(e.target.checked,l)},(0,c.decodeEntities)(s),_&&(0,a.createElement)("span",{className:"wcf-choices-counter"},"(",f,")")),(0,a.createElement)("div",{className:"wcf-is-child-term"},u&&u.map(((e,t)=>(0,a.createElement)(K,(0,r.Z)({key:t},e))))))};return J>V&&!0!==S?.mobile&&"horizontal"!==S.layout&&G?(0,a.createElement)(f.LW,{style:{height:250},trackYProps:{renderer:e=>{const{elementRef:t,...l}=e;return(0,a.createElement)("span",(0,r.Z)({},l,{ref:t,className:"wcf-scrolltrack"}))}},onScrollStop:e=>{(0,E.e9)(e.scrollTop,e.scrollHeight)>=60&&L<J&&P(L+20)}},D.map(((e,t)=>(0,a.createElement)(K,(0,r.Z)({key:t},e))))):(0,i.isEmpty)(D)?(0,a.createElement)("span",{className:"wcf-no-options-label"},(0,m.__)("No options available","woocommerce-product-filters")):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{id:"wcf-items-container-"+t},D.map(((e,t)=>(0,a.createElement)(K,(0,r.Z)({key:t},e))))),(0,a.createElement)(b,{displayShowMore:J>L&&!0===S?.mobile||J>L&&"horizontal"===S.layout,showMoreMethod:()=>P(J),displayShowLess:L>V&&!0===S?.mobile||L>V&&"horizontal"===S.layout,showLessMethod:()=>P(V)}))}}}]);