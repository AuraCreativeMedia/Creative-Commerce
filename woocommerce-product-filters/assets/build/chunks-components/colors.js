"use strict";(self.webpackChunkwoocommerce_filters=self.webpackChunkwoocommerce_filters||[]).push([[385],{4095:function(e,t,l){l.r(t);var r=l(7462),s=l(9307),o=l(9196),a=l(3026),c=l(385),n=l(9470),i=l(1524),u=l(2819),f=l(5236),m=l(7536),p=l(5736),d=l(374),h=l(9950),g=l(389),w=l(4271),y=l(4184),E=l.n(y),_=l(7826),b=l.n(_);const C=WCF_Frontend;t.default=e=>{let{name:t,value:l,setValue:y,group:_,facet:v,...G}=e;const k="yes"===C.filter_num_products,{getGroup:A,getStoredValue:x,getInitialCounts:N,counts:Z,prefilledValues:z,setPrefilling:B}=(0,g.CR)(),P=A(_).data[v.slug],{watch:S}=(0,m.Gc)(),V=x(_,t),F=S(t,V),[I,O]=(0,o.useState)(Array.isArray(V)?V:[]),[R,T]=(0,o.useState)([]),Y=!!(0,u.has)(v,"options.colors_show_labels")&&(0,w.K1)(v.options.colors_show_labels);let q=!0===Y?2:5;Y||!0!==k||(q=3);const H=!0===Y?"scale400":"scale600",K={display:"flex",alignItems:"center"},W=G.layout;Y&&"horizontal"===W?q=1:Y||"horizontal"!==W||(q=3);const j=(e,l)=>{let r=I.filter((function(){return!0}));if(!0===e)r.push(l);else if(!1===e){var s=I.indexOf(l);r.splice(s,1)}O(r),y(t,r)};return(0,f.H)((()=>{const e=N(t);(0,u.has)(Z,t)?T(Z[t]):T(e)})),(0,o.useEffect)((()=>{let e=F;Array.isArray(e)||(e=[]),(0,u.isEqual)(e,I)||O(Array.isArray(e)?b()(e):[])}),[F]),(0,o.useEffect)((()=>{(0,u.has)(z,t)&&(B(!0),y(t,z[t].map(Number)),B(!1))}),[z]),(0,o.useEffect)((()=>{"horizontal"!==W&&(0,g.BB)(T,t)}),[]),(0,o.useEffect)((()=>(w.YB.on("filterToggled-"+t,(e=>{B(!0),y(t,e.value),B(!1)})),()=>{w.YB.remove("filterToggled-"+t)})),[]),(0,d.Z)("wcf-reset-filters",(()=>{B(!0),y(t,[]),O([]),B(!1)})),(0,u.isEmpty)(P)||(0,u.isEmpty)(R)?(0,s.createElement)("span",{className:"wcf-no-options-label"},(0,p.__)("No options available","woocommerce-product-filters")):(0,s.createElement)(n.Z,{flexGridColumnCount:q,flexGridColumnGap:H,flexGridRowGap:H,className:"wcf-colors-grid"},P.map(((e,t)=>{let{name:l,color:o,term_id:n}=e;const f=(0,u.isEmpty)(o)?"#ccc":o;let m=0;const p=R.find((e=>e.term_id===""+n));if(m=p?.counter||0,0===m)return;const d=E()("wcf-choices-counter",{"with-label":!0===Y});return(0,s.createElement)(i.ZP,(0,r.Z)({key:t},K),(0,s.createElement)(a.Z,{checked:I.includes(n),labelPlacement:c.Oi.right,overrides:(0,h.Gv)(f,"horizontal"===W&&!Y,I.includes(n)),onChange:e=>j(e.target.checked,n)},!0===Y&&l,k&&(0,s.createElement)("span",{className:d},"(",m,")")))})))}}}]);