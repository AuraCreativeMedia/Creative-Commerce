"use strict";(self.webpackChunkwoocommerce_filters=self.webpackChunkwoocommerce_filters||[]).push([[368],{1984:function(e,t,a){var l=a(9307);t.Z=function(e){let{icon:t,size:a=24,...o}=e;return(0,l.cloneElement)(t,{width:a,height:a,...o})}},7231:function(e,t,a){var l=a(9307),o=a(444);const s=(0,l.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(o.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}));t.Z=s},3271:function(e,t,a){a.r(t);var l=a(7462),o=a(9307),s=a(9196),r=a(2819),n=a(5736),i=a(9470),c=a(1524),m=a(1984),u=a(7231),f=a(4184),d=a.n(f),h=a(2629),p=a(5236),g=a(9768),E=a(7536),w=a(374),y=a(389),b=a(4271);const _=(0,o.lazy)((()=>a.e(683).then(a.bind(a,521)))),v=WCF_Frontend;t.default=e=>{let{name:t,value:a,setValue:f,options:N,group:z,...C}=e;const{watch:S}=(0,E.Gc)(),A="yes"===v.filter_num_products,{submittedValues:k,getGroup:G,getStoredValue:Z,getInitialCounts:L,counts:x,prefilledValues:F,setPrefilling:M}=(0,y.CR)(),V=12,[B,P]=(0,s.useState)(V),[R,T]=(0,s.useState)(!0),W=Z(z,t),Y=S(t,W),[H,I]=(0,s.useState)(Array.isArray(W)?W:[]),[q,j]=(0,s.useState)([]),D=G(z),J=!!(0,r.has)(D,"data."+C.facet.slug)&&(0,s.useMemo)((()=>D.data[C.facet.slug]),[D.data[C.facet.slug]]);if(!J)return(0,o.createElement)(o.Fragment,null,(0,n.__)("No terms found for the specified taxonomy.","woocommerce-product-filters"));const K=e=>{let a=[];H.includes(e)?(a=H.filter((t=>t!==e)),I(H.filter((t=>t!==e)))):(a=[...H,e],I(a)),f(t,!(0,r.isEmpty)(a)&&a)};(0,p.H)((async()=>{const e=L(t);if((0,r.has)(x,t)?j(x[t]):j(e),"horizontal"===C.layout){const e=WCF_Frontend.mobile_images_limit;await(0,b.f6)(P,e,t),(0,r.has)(k,t)&&I(Array.isArray(k[t])?k[t].map(Number):[])}})),(0,s.useEffect)((()=>{const e=Y;e!==H&&I(Array.isArray(e)?e:[])}),[Y]),(0,s.useEffect)((()=>{(0,r.has)(F,t)&&(M(!0),f(t,F[t].map(Number)),M(!1))}),[F]),(0,s.useEffect)((()=>{"horizontal"!==C.layout&&(0,y.BB)(j,t,{method:T,itemsAmount:V,mobile:C?.mobile})}),[]),(0,s.useEffect)((()=>{if((0,r.has)(k,t)&&!0===C.mobile){const e=k[t].map(Number);(0,r.isEqual)(e,H)||(M(!0),f(t,e),M(!1))}}),[k]),(0,s.useEffect)((()=>(b.YB.on("filterToggled-"+t,(e=>{M(!0),f(t,e.value),M(!1)})),()=>{b.YB.remove("filterToggled-"+t)})),[]),(0,w.Z)("wcf-reset-filters",(()=>{M(!0),f(t,[]),I([]),M(!1)}));const O="horizontal"===C.layout?1:2,Q="image_name"===C.facet.options.image_display_mode,U=(0,b.V9)(J,q),X=!0===R||!0===C?.mobile?U.slice(0,B):U,$=Array.isArray(U)?parseInt(U.length):0,ee=()=>(0,o.createElement)(i.Z,{flexGridColumnCount:O,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",className:"wcf-img-grid"},X.map((e=>{const t=e.image,a=e.term_id,l=e.name,s=e.count;var n=d()({"has-img":!(0,r.isEmpty)(t),"wcf-img-item":!0,"with-label":!0===Q,"no-label":!1===Q});return(0,o.createElement)(c.ZP,{className:n,key:a,onClick:e=>K(a)},H.includes(a)&&(0,o.createElement)("div",{className:"active-item"},(0,o.createElement)(m.Z,{icon:u.Z,size:20,className:"toggle-cross"})),!(0,r.isEmpty)(t)&&(0,o.createElement)("div",{className:"img-container"},(0,o.createElement)("img",{src:t,alt:l})),Q&&(0,o.createElement)("span",null,(0,h.decodeEntities)(l),A&&(0,o.createElement)("span",{className:"wcf-choices-counter"},"(",s,")")))})));return $>V&&!0!==C?.mobile&&R&&"horizontal"!==C.layout?(0,o.createElement)(g.LW,{style:{height:500},trackYProps:{renderer:e=>{const{elementRef:t,...a}=e;return(0,o.createElement)("span",(0,l.Z)({},a,{ref:t,className:"wcf-scrolltrack"}))}},onScrollStop:e=>{(0,b.e9)(e.scrollTop,e.scrollHeight)>=30&&B<$&&P(B+20)}},ee()):(0,r.isEmpty)(X)?(0,o.createElement)("span",{className:"wcf-no-options-label"},(0,n.__)("No options available","woocommerce-product-filters")):(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",{id:"wcf-items-container-"+t},ee(),(0,o.createElement)(_,{displayShowMore:$>B&&!0===C?.mobile||$>B&&"horizontal"===C.layout,showMoreMethod:()=>P($),displayShowLess:B>V&&!0===C?.mobile||B>V&&"horizontal"===C.layout,showLessMethod:()=>P(V)})))}}}]);