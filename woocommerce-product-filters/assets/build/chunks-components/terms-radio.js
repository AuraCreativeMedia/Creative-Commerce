"use strict";(self.webpackChunkwoocommerce_filters=self.webpackChunkwoocommerce_filters||[]).push([[468],{8653:function(e,t,l){l.r(t);var o=l(7462),r=l(9307),a=l(9196),n=l(2819),s=l(4988),c=l(9978),i=l(9512),u=l(5736),m=l(5236),f=l(9768),d=l(2629),h=l(134),g=l(7536),p=l(374),E=l(9950),y=l(389),b=l(4271);const w=(0,r.lazy)((()=>l.e(683).then(l.bind(l,521)))),v=WCF_Frontend;t.default=e=>{let{name:t,value:l,setValue:S,options:_,group:k,...C}=e;const{watch:F,resetField:z}=(0,g.Gc)(),N="yes"===v.filter_num_products,A=12,[M,T]=(0,a.useState)(A),{submittedValues:V,getStoredValue:Z,getGroup:B,getInitialCounts:H,counts:L,prefilledValues:P,setPrefilling:R}=(0,y.CR)(),Y=Z(k,t),G=F(t,Y),[I,W]=(0,a.useState)(!1),[x,U]=(0,a.useState)(!0),[j,q]=(0,a.useState)([]),D=B(k),J=!!(0,n.has)(D,"data."+C.facet.slug)&&(0,a.useMemo)((()=>D.data[C.facet.slug]),[D.data[C.facet.slug]]);if(!J)return(0,r.createElement)(r.Fragment,null,(0,u.__)("No terms found for the specified taxonomy.","woocommerce-product-filters"));(0,m.H)((()=>{const e=H(t);(0,n.has)(L,t)?q(L[t]):q(e),"horizontal"===C.layout&&((0,b.f6)(T,3,t),(0,n.has)(V,t)&&W(Array.isArray(V[t])?V[t].toString():[]))})),(0,a.useEffect)((()=>{const e=G;e!==I&&W(!(0,n.isEmpty)(e)&&e)}),[G]);const K=e=>{W(e),S(t,e)};(0,a.useEffect)((()=>{"horizontal"!==C.layout&&(0,y.BB)(q,t,{method:U,itemsAmount:A,mobile:C?.mobile})}),[]),(0,a.useEffect)((()=>{(0,n.has)(P,t)&&(R(!0),S(t,P[t][0].toString()),R(!1))}),[P]),(0,a.useEffect)((()=>{(0,n.has)(V,t)||!0!==C.mobile||(R(!0),z(t),R(!1))}),[V]),(0,a.useEffect)((()=>(b.YB.on("filterToggled-"+t,(e=>{S(t,""),z(t),W(!1)})),()=>{b.YB.remove("filterToggled-"+t)})),[]),(0,p.Z)("wcf-reset-filters",(()=>{R(!0),S(t,""),W(!1),R(!1)}));const O=e=>{let t=[];return(0,h.li)(e,((e,l,o,a)=>{var n;const c=React.createElement(s.Z,{overrides:(0,E.oU)(e.depth),value:Number.isFinite(e.id)?e.id.toString():e.id,key:e.id},(0,r.createElement)(r.Fragment,null,(0,d.decodeEntities)(e.label),N&&(0,r.createElement)("span",{className:"wcf-choices-counter"},"(",null!==(n=e?.count)&&void 0!==n?n:0,")")));t.push(c)}),{childrenPath:"children"}),t},Q=(0,b.V9)(J,j),X=!0===x||!0===C?.mobile?Q.slice(0,M):Q,$=Array.isArray(Q)?parseInt(Q.length):0;return $>A&&!0!==C?.mobile&&x&&"horizontal"!==C.layout?(0,r.createElement)(f.LW,{style:{height:250},trackYProps:{renderer:e=>{const{elementRef:t,...l}=e;return(0,r.createElement)("span",(0,o.Z)({},l,{ref:t,className:"wcf-scrolltrack"}))}},onScrollStop:e=>{(0,b.e9)(e.scrollTop,e.scrollHeight)>=40&&M<$&&T(M+20)}},(0,r.createElement)(c.Z,{value:I,onChange:e=>K(e.currentTarget.value),name:"number",align:i.H.vertical},O(X))):(0,n.isEmpty)(X)?(0,r.createElement)("span",{className:"wcf-no-options-label"},(0,u.__)("No options available","woocommerce-product-filters")):(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{id:"wcf-items-container-"+t},(0,r.createElement)(c.Z,{value:I,onChange:e=>K(e.currentTarget.value),name:"number",align:i.H.vertical},O(X)),(0,r.createElement)(w,{displayShowMore:$>M&&!0===C?.mobile||$>M&&"horizontal"===C.layout,showMoreMethod:()=>T($),displayShowLess:M>A&&!0===C?.mobile||M>A&&"horizontal"===C.layout,showLessMethod:()=>T(A)})))}}}]);