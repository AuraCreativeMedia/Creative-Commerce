"use strict";(self.webpackChunkwoocommerce_filters=self.webpackChunkwoocommerce_filters||[]).push([[661],{4907:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(9307),o=r(9196),a=r(9233),i=r(4548),s=r(5236),u=r(2629),c=r(5736),l=r(9016),m=r.n(l);var f=r(7180),p=r.n(f),d=function(e){let t;function r(e){const r={code:"USD",symbol:"$",symbolPosition:"left",thousandSeparator:",",decimalSeparator:".",precision:2,...e};t={code:r.code.toString(),symbol:r.symbol.toString(),symbolPosition:r.symbolPosition.toString(),decimalSeparator:r.decimalSeparator.toString(),priceFormat:a(r),thousandSeparator:r.thousandSeparator.toString(),precision:parseInt(r.precision,10)}}function o(e,r=!1){const n=function({precision:e=null,decimalSeparator:t=".",thousandSeparator:r=","},n){if(void 0===n)return"";if("number"!=typeof n&&(n=parseFloat(n)),isNaN(n))return"";let o=null===e?NaN:Number(e);if(isNaN(o)){const[,e]=n.toString().split(".");o=e?e.length:0}return m()(n,o,t,r)}(t,e);if(""===n)return n;const{priceFormat:o,symbol:a,code:i}=t;return(0,c.sprintf)(o,r?i:a,n)}function a(e){if(e.priceFormat)return function(e){const t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}(e.priceFormat.toString());switch(e.symbolPosition){case"left":return"%1$s%2$s";case"right":return"%2$s%1$s";case"left_space":return"%1$s %2$s";case"right_space":return"%2$s %1$s"}return"%1$s%2$s"}return r(e),{getCurrencyConfig:()=>({...t}),getDataForCountry:function(e,t={},r={}){const n=t[e]||{},o=r[n.currency_code];return o?{code:n.currency_code,symbol:(0,u.decodeEntities)(o),symbolPosition:n.currency_pos,thousandSeparator:n.thousand_sep,decimalSeparator:n.decimal_sep,precision:n.num_decimals}:{}},setCurrency:r,formatAmount:o,formatCurrency:function(e){return p()("Currency().formatCurrency",{version:"5.0.0",alternative:"Currency().formatAmount",plugin:"WooCommerce",hint:"`formatAmount` accepts the same arguments as formatCurrency"}),o(e)},getPriceFormat:a,formatDecimal(e){if("number"!=typeof e&&(e=parseFloat(e)),Number.isNaN(e))return 0;const{precision:r}=t;return Math.round(e*Math.pow(10,r))/Math.pow(10,r)},formatDecimalString(e){if("number"!=typeof e&&(e=parseFloat(e)),Number.isNaN(e))return"";const{precision:r}=t;return e.toFixed(r)},render(e){return"number"!=typeof e&&(e=parseFloat(e)),e<0?(0,n.createElement)("span",{className:"is-negative"},o(e)):o(e)}}},y=r(7536),g=r(374),h=r(5609),S=r(5274),b=r(9950),v=r(2819),_=r(389),F=r(4271);const C=WCF_Frontend,N=C.currency,A=!0===C.is_taxonomy_page,E=C.current_taxonomy;var x=e=>{let{name:t,value:r,setValue:u,group:l,...m}=e;const{watch:f,resetField:p}=(0,y.Gc)(),{getStoredValue:x,prefilledValues:M,setPrefilling:$,submittedValues:w}=(0,_.CR)(),[P,D]=(0,o.useState)(!0),[T,V]=(0,o.useState)(Math.round(C.highest_price)),k=[0,T];if(0===k[0]&&0===k[1])return(0,c.__)("No prices have been found for your products. Please save your filter groups to regenerate the index.");let B=x(l,t);(0,v.isEmpty)(B)||(B=B.split(","));const R=f(t,Array.isArray(B)?B:k),[Z,j]=(0,o.useState)(Array.isArray(B)?B:k),H=(0,o.useMemo)((()=>d(N)),[N]);return(0,i.l)((()=>{!1===r&&j([0,T])}),[r]),function(e,t){void 0===t&&(t=!0);var r=(0,o.useRef)(!1),n=(0,o.useRef)(e);(0,o.useEffect)((function(){n.current=e})),(0,o.useEffect)((function(){t&&!r.current&&(n.current(),r.current=!0)}),[t])}((()=>{u(t,Z.toString())}),Array.isArray(B)),(0,o.useEffect)((()=>{let e=R;(0,v.isEmpty)(e)?j([0,T]):Array.isArray(e)||(e=e.split(",").map(Number),j(e))}),[R]),(0,o.useEffect)((()=>{(0,v.has)(M,t)&&($(!0),u(t,M[t]),j(M[t].split(",").map(Number)),$(!1))}),[M]),(0,o.useEffect)((()=>{(0,v.has)(w,t)||($(!0),p(t),j([0,T]),$(!1))}),[w]),(0,o.useEffect)((()=>(F.YB.on("filterToggled-"+t,(e=>{p(t),u(t,!1),j([0,T])})),()=>{F.YB.remove("filterToggled-"+t)})),[]),(0,g.Z)("wcf-reset-filters",(()=>{$(!0),u(t,!1),j([0,T]),$(!1)})),(0,s.H)((async()=>{if(A)try{const e=await S.Z.post(C.rest_api_url+"/pricing",{filter:m.facet.id,...E});e.data?.max&&(j([0,Math.round(e.data?.max)]),V(Math.round(e.data?.max))),D(!1)}catch(e){console.error(e)}else D(!1)})),P?(0,n.createElement)(h.Spinner,null):(0,n.createElement)(a.Z,{value:Z,onChange:e=>{let{value:t}=e;return t&&j(t)},onFinalChange:e=>{let{value:r}=e;return u(t,r.toString())},valueToLabel:e=>H.formatAmount(e),min:0,max:T,overrides:(0,b.$7)(H.formatAmount)})}},9016:function(e){e.exports=function(e,t,r,n){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var o=isFinite(+e)?+e:0,a=isFinite(+t)?Math.abs(t):0,i=void 0===n?",":n,s=void 0===r?".":r,u="";return u=(a?function(e,t){if(-1===(""+e).indexOf("e"))return+(Math.round(e+"e+"+t)+"e-"+t);var r=(""+e).split("e"),n="";return+r[1]+t>0&&(n="+"),(+(Math.round(+r[0]+"e"+n+(+r[1]+t))+"e-"+t)).toFixed(t)}(o,a).toString():""+Math.round(o)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(u[1]||"").length<a&&(u[1]=u[1]||"",u[1]+=new Array(a-u[1].length+1).join("0")),u.join(s)}}}]);